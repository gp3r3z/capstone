import{x as C,l,A as d,y as w,_ as R,r as j,w as B,b as p,z as v,P as c,C as L,B as S,c as r,e as t,n as g,D as f,t as u,F as h,i as b,f as E,g as A,v as P,E as D,u as O,o as n,j as k,m as x}from"./index.dd2c57bb.js";class U{async getCommentsByGroupId(s){const m=await C.get(`api/groups/${s}/comments`);l.log("getting comments by group id",m.data),d.comments=m.data}async postComment(s,m){const o=await C.post(`api/comments/${m}`,s);l.log("comment data",o.data)}}const I=new U;class M{static EnterGroupChat(s){w.emit("ENTER_GROUPCHAT",s)}static LeaveGroupChat(s){w.emit("LEAVE_GROUPCHAT",s)}}const N={setup(){const i=O(),s=j({});async function m(){try{await v.getGroupById(i.params.id)}catch(e){c.error(e),l.log(e)}}async function o(){try{await v.getGroupMembersByGroupId(i.params.id)}catch(e){c.error("[ERROR]",e.message),l.log(e)}}async function y(){try{await v.getEventsByGroupId(i.params.id)}catch(e){console.error(e),c.error("[ERROR]",e.message),l.log(e)}}async function G(){try{await I.getCommentsByGroupId(i.params.id)}catch(e){console.error(e),c.error("[ERROR]",e.message)}}return B(()=>{m(),o(),y(),G(),d.activeEvent}),{editable:s,activeGroup:p(()=>d.activeGroup),activeGroupCreator:p(()=>d.activeGroupCreator),foundMe:p(()=>d.groupMembers.find(e=>e.accountId==d.account.id)),account:p(()=>d.account),groupMembers:p(()=>d.groupMembers),events:p(()=>d.events),comments:p(()=>d.comments),async joinGroup(){try{l.log("Attempting to join group"),await v.joinGroup(i.params.id),c.success(`Joined Group!
Message Service Activated`)}catch(e){c.error("Unable to join Group: ",e),l.log(e)}},async leaveGroup(e){try{l.log("Attempting to leave group",e),await c.confirm("Are you sure you want to leave this group?")&&await v.leaveGroup(e)}catch(_){c.error(_),l.log(_)}},async enterGroupChat(){try{M.EnterGroupChat(i.params.id)}catch(e){c.error(e),l.log(e)}},async leaveGroupChat(){try{M.LeaveGroupChat(i.params.id)}catch(e){c.error(e),l.log(e)}},async postComment(){try{await I.postComment(s.value,i.params.id),s.value={},c.success("Comment Posted")}catch(e){c.error("[ERROR]",e.message)}}}},components:{Comment:L,GroupEvent:S}},V={class:"container-fluid"},T={class:"row justify-content-center"},H={class:"col-1 mt-3"},z={key:0,type:"button",class:"btn btn-light","data-bs-toggle":"modal","data-bs-target":"#edit-group-modal"},F=t("i",{class:"mdi mdi-pencil fs-3 text-warning text-end fw-bold"},null,-1),J=[F],K={class:"row justify-content-center mt-3"},q={class:"col-6 bg-dark p-3 rounded"},Q={key:0},W={key:1},X={key:2},Y=t("button",{class:"btn btn-danger ms-3",disabled:""},"Group is full",-1),Z=[Y],$={class:"col-5"},tt={class:"row p-2 justify-content-center"},ot=t("span",{class:"d-flex justify-content-center align-items-center fst-italic fw-bold text-white fs-4"},"Group Leader:",-1),et={class:"d-flex justify-content-center align-items-center mt-3"},st={ontouchstart:" this.classList.toggle('hover');"},at={class:"container-creator"},rt={class:"inner-creator"},nt={class:"inner-creator"},ct={class:"row mx-4 p-2 rounded bg-light mt-3"},it=t("span",{class:"d-flex justify-content-center align-items-center fst-italic fw-bold text-white fs-4"},"Group Members:",-1),lt={class:"col-2 mt-3"},dt={ontouchstart:"this.classList.toggle('hover');"},ut={class:"container"},mt={class:"inner"},pt={class:"bac"},vt={class:"inner"},_t={class:"row mt-3 rounded"},gt={class:"col-4"},ft={class:"row"},ht=t("i",{class:"mdi mdi-chat fs-2 ms-1"},null,-1),bt=[ht],yt={class:"offcanvas offcanvas-start bg-secondary",tabindex:"-1",id:"offcanvasExample","aria-labelledby":"offcanvasExampleLabel"},Gt={class:"offcanvas-header"},Ct=t("h5",{class:"offcanvas-title",id:"offcanvasExampleLabel"},"Group Chat",-1),wt={class:"offcanvas-body container comment-body"},Et={class:"row"},kt={class:"comment-footer p-0"},xt={class:"col-9"},It=t("div",{class:"col-1"},[t("button",{class:"btn btn-primary"},[t("i",{class:"mdi mdi-plus"})])],-1),Mt={class:"row"},Rt={key:0,href:"#",class:"float-right btn rounded-circle bg-dark d-flex justify-content-center align-items-center","data-bs-toggle":"modal","data-bs-target":"#create-event-modal",title:"Create Event"},jt=t("i",{class:"mdi mdi-gamepad-variant fs-1"},null,-1),Bt=[jt];function Lt(i,s,m,o,y,G){const e=x("GroupEvent"),_=x("Comment");return n(),r("section",V,[t("section",T,[t("div",{class:"col-9 hero-img rounded mt-3",style:g(`background-image: url(${o.activeGroup.coverImg})`)},null,4),t("div",H,[o.activeGroup.creatorId===o.account.id?(n(),r("button",z,J)):f("",!0)])]),t("section",K,[t("div",q,[t("section",null,[t("h2",null,"Group: "+u(o.activeGroup.groupName),1),t("p",null,"Description: "+u(o.activeGroup.description),1),t("p",null,"Capacity: "+u(o.activeGroup.capacity),1),t("p",null,"SkillLevel: "+u(o.activeGroup.skillLevel),1)]),t("section",null,[o.account.id!=o.activeGroup.creatorId&&!o.foundMe&&o.activeGroup.capacity>0?(n(),r("div",Q,[t("button",{onClick:s[0]||(s[0]=(...a)=>o.joinGroup&&o.joinGroup(...a)),class:"btn btn-primary"},"Join")])):o.foundMe?(n(),r("div",W,[t("button",{onClick:s[1]||(s[1]=a=>o.leaveGroup(o.foundMe.id)),class:"btn btn-danger ms-3"},"Leave Group")])):!o.foundMe&&o.activeGroup.capacity==0?(n(),r("div",X,Z)):f("",!0)])]),t("div",$,[t("section",tt,[ot,t("div",et,[t("div",st,[t("div",at,[t("div",{class:"front-creator",style:g(`background-image: url(${o.activeGroupCreator.picture?o.activeGroupCreator.picture:o.activeGroupCreator.coverImg})`)},[t("div",rt,[t("p",null,u(o.activeGroupCreator.name),1)])],4),t("div",{class:"back-creator",style:g(`background-image: url(${o.activeGroupCreator.picture?o.activeGroupCreator.picture:o.activeGroupCreator.coverImg})`)},[t("div",nt,[t("p",null,u(o.activeGroupCreator.bio?o.activeGroupCreator.bio:"User has no Bio"),1)])],4)])])])])])]),t("section",ct,[it,(n(!0),r(h,null,b(o.groupMembers,a=>(n(),r("div",lt,[t("div",dt,[t("div",ut,[t("div",{class:"front",style:g(`background-image: url(${a.profile.picture})`)},[t("div",mt,[t("p",null,u(a.profile.name),1)])],4),t("div",pt,[t("div",vt,[t("p",null,u(a.profile.bio?a.profile.bio:"User has no Bio"),1)])])])])]))),256))]),t("section",_t,[(n(!0),r(h,null,b(o.events,a=>(n(),r("div",gt,[k(e,{event:a},null,8,["event"])]))),256))]),t("section",ft,[o.foundMe||o.account.id==o.activeGroup.creatorId?(n(),r("button",{key:0,onClick:s[2]||(s[2]=(...a)=>o.enterGroupChat&&o.enterGroupChat(...a)),class:"btn-primary float-left btn rounded-circle bg-dark d-flex justify-content-start align-items-start",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasExample","aria-controls":"offcanvasExample"},bt)):f("",!0)]),t("div",yt,[t("div",Gt,[Ct,t("button",{onClick:s[3]||(s[3]=(...a)=>o.leaveGroupChat&&o.leaveGroupChat(...a)),type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"})]),t("div",wt,[t("section",Et,[(n(!0),r(h,null,b(o.comments,a=>(n(),r("div",null,[k(_,{comment:a},null,8,["comment"])]))),256)),t("div",kt,[t("form",{onSubmit:s[6]||(s[6]=E(a=>o.postComment(),["prevent"])),class:"row"},[t("div",xt,[A(t("textarea",{onKeydown:s[4]||(s[4]=D(E(a=>o.postComment(),["prevent"]),["enter"])),class:"form-control m-0","onUpdate:modelValue":s[5]||(s[5]=a=>o.editable.description=a),name:"Chat....",id:"",cols:"10",rows:"1"},null,544),[[P,o.editable.description]])]),It],32)])])])]),t("section",Mt,[o.foundMe||o.activeGroup.creatorId==o.account.id?(n(),r("button",Rt,Bt)):f("",!0)])])}const At=R(N,[["render",Lt]]);export{At as default};
